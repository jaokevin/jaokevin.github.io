<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
    integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="main.css">

  <title>快篩「高教雙語政策」！上路一年後，大學課堂還好嗎？</title>
</head>

<body>
 <!-- 封面 -->
  <div class="container-fluid scroll_video" style="height: 250vh; padding: 0px;">
    <video id="video" src="assets/start_scrolled-video.mp4"></video>
    <div id="video_fliter" style="height:250vh;width: 100vw; background-color:black; z-index:-2;"></div>
  </div>

  <div style="height: 250vh;">
    <img style="width:100%;height: 100vh;" class="sticky-top" src="assets/cover-big.png">
  </div>

  <!-- 標題＋進度條 -->
  <div id="topic" class="sticky-top" style="height: 10vh;background-color: cadetblue;">
    <h1 style="color: white;top: 10%;text-align: center; width:99vw; position:absolute">快篩「高教雙語政策」！上路一年後，大學課堂還好嗎？</h1>
    <div class="sticky-top" style="height: 1vh; background-color:gray;position: relative;top: 9vh;">
      <div id="statusbar" style="height: 1vh; width: 0px; background-color:gold;position: relative;">
        <!-- <p>Now is <span id="currentpersentage">0</span> %</p> -->
      </div>
    </div>
  </div>

  <div style="height: 1000vh;"></div>

  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
    integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
    integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
    crossorigin="anonymous"></script>
  <script>

    // 封面捲動式影片
    $(function () {
      var scroll_max = $(".scroll_video").height() - $(window).height();
      $(window).scroll(function () {
        var current_pos = $(document).scrollTop();
        var video = $("#video").get(0);
        var videolength = video.duration;
        if (current_pos >= $(".scroll_video").offset().top && current_pos < $(".scroll_video").offset().top + $(".scroll_video").height()) {
          $("#video").css("position", "fixed");
          $("#video_fliter").css("position", "fixed");
          video.currentTime = current_pos / scroll_max * videolength;
          $("#video").css("opacity", 1 - (current_pos / scroll_max - 0.7));
        } else {
          $("#video").css("position", "");
          $("#video_fliter").css("position", "");
        }
      });
    });

    // 進度條
    $(function () {
      var doch = $(document).height();
      var winw = $(window).width();
      var winh = $(window).height();
      var topic_offset_top = $("#topic").offset().top
      var scroll_max = doch - topic_offset_top - winh;

      $(window).scroll(function () {
        var current_pos = $(window).scrollTop();
        var new_width = (current_pos - topic_offset_top) / scroll_max * winw;
        if (new_width > 0) {
          $("#statusbar").css("width", new_width);
          // $("#currentpersentage").html(parseInt((current_pos - topic_offset_top) / scroll_max * 100));
        }

      });
    });


  </script>
</body>

</html>